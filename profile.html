<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Iron Oath — Mon profil</title>

  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/layout.css">

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./js/config.js" defer></script>
  <script src="./js/common-ui.js" defer></script>
  <script src="./js/auth.js" defer></script>
  <script src="./js/profile.js" defer></script>
</head>
<body>
  <header id="site-header"></header>

  <main class="container">
    <h1>Mon inventaire</h1>
    <p class="muted">Gérez vos ressources, mettez à jour vos quantités et effectuez des dons.</p>

    <!-- ===== Deux colonnes: Ajouter / Retirer ===== -->
    <section class="two-col">
      <!-- Ajouter -->
      <section class="card form-card" id="sec-add">
        <h2>Ajouter / Incrémenter</h2>
        <div class="row" style="width:100%">
          <select id="add-resource-select" required>
            <option value="" disabled selected>— choisir —</option>
          </select>
          <input type="number" id="add-stacks" placeholder="Stacks (×64)" min="0" step="1" />
          <input type="number" id="add-units"  placeholder="Unités" min="0" step="1" />
          <button id="btn-add" class="btn primary">Ajouter</button>
        </div>
        <p class="small muted" style="margin:.4rem 0 0">Total ajouté : <strong id="add-total">0</strong></p>
      </section>

      <!-- Retirer -->
      <section class="card form-card" id="sec-sub">
        <h2>Retirer / Décrémenter</h2>
        <div class="row" style="width:100%">
          <select id="sub-resource-select" required>
            <option value="" disabled selected>— choisir —</option>
          </select>
          <input type="number" id="sub-stacks" placeholder="Stacks (×64)" min="0" step="1" />
          <input type="number" id="sub-units"  placeholder="Unités" min="0" step="1" />
          <button id="btn-sub" class="btn">Retirer</button>
        </div>
        <p class="small muted" style="margin:.4rem 0 0">Total retiré : <strong id="sub-total">0</strong></p>
      </section>
    </section>

    <!-- Inventaire -->
    <section class="card">
      <h2>Inventaire actuel</h2>
      <table id="my-inventory" class="table">
        <thead>
          <tr><th>Ressource</th><th>Quantité</th><th>Actions</th></tr>
        </thead>
        <tbody id="inv-body"></tbody>
      </table>
    </section>

    <!-- Donner -->
    <section class="card">
      <h2>Donner à un membre</h2>
      <div class="row" style="width:100%">
        <select id="don-user" required>
          <option value="" disabled selected>— choisir —</option>
        </select>
        <select id="don-resource-select" required>
          <option value="" disabled selected>— choisir —</option>
        </select>
        <input type="number" id="don-qty" placeholder="Quantité" min="1" step="1" />
        <button id="btn-donate" class="btn">Donner</button>
      </div>
      <p id="profile-feedback" class="muted"></p>
    </section>
  </main>
</body>
</html>
